<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ANKORMESSAJERY â€” Login</title>

<style>
body{
  margin:0;
  background:#0f1220;
  color:white;
  font-family:Arial;
}

/* CONTENEDOR */
.box{
  max-width:380px;
  margin:70px auto;
  padding:25px;
  background:#141a34;
  border-radius:12px;
}

/* INPUTS */
input{
  width:100%;
  padding:10px;
  border-radius:7px;
  border:none;
  margin-top:8px;
  background:#1d2550;
  color:white;
}
button{
  width:100%;
  margin-top:10px;
  padding:10px;
  border-radius:7px;
  border:none;
  font-weight:bold;
  cursor:pointer;
  background:#5c6cff;
  color:white;
}

.hide{display:none;}

.avatar{
  width:60px;
  height:60px;
  border-radius:50%;
  background:#2ee6a8;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:25px;
  font-weight:bold;
  margin:auto;
}

a{color:#6f8dff; cursor:pointer}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="box" id="loginBox">
  <h2>Iniciar SesiÃ³n</h2>

  <input id="loginUser" placeholder="Usuario">
  <input id="loginPass" type="password" placeholder="ContraseÃ±a">

  <button onclick="login()">Entrar</button>

  <p>Â¿No tienes cuenta? <a onclick="showRegister()">RegÃ­strate</a></p>
</div>

<!-- REGISTRO -->
<div class="box hide" id="registerBox">
  <h2>Crear Cuenta</h2>

  <input id="regUser" placeholder="Usuario">
  <input id="regPass" type="password" placeholder="ContraseÃ±a">

  <button onclick="register()">Registrar</button>

  <p>Â¿Ya tienes cuenta? <a onclick="showLogin()">Inicia sesiÃ³n</a></p>
</div>

<!-- PERFIL -->
<div class="box hide" id="profileBox">
  <div class="avatar" id="avatarBox"></div>

  <h2 id="welcome"></h2>

  <h3>Cambiar nombre</h3>
  <input id="newName" placeholder="Nuevo nombre">
  <button onclick="changeName()">Guardar</button>

  <h3>Cambiar Avatar (1 letra)</h3>
  <input id="newAvatar" maxlength="1" placeholder="A">
  <button onclick="changeAvatar()">Actualizar</button>

  <button style="background:red" onclick="logout()">Cerrar sesiÃ³n</button>
</div>

<script>
// guardar usuarios
let users = JSON.parse(localStorage.getItem("users")) || {};
let session = localStorage.getItem("session");

// mostrar pantallas
function showLogin(){
  loginBox.classList.remove("hide");
  registerBox.classList.add("hide");
  profileBox.classList.add("hide");
}
function showRegister(){
  loginBox.classList.add("hide");
  registerBox.classList.remove("hide");
  profileBox.classList.add("hide");
}
function showProfile(){
  loginBox.classList.add("hide");
  registerBox.classList.add("hide");
  profileBox.classList.remove("hide");
}

// registrar
function register(){
  let u = regUser.value.trim();
  let p = regPass.value.trim();

  if(!u || !p) return alert("Completa todo");

  if(users[u]) return alert("Ese usuario ya existe");

  users[u] = {password:p, name:u, avatar:u[0].toUpperCase()};
  localStorage.setItem("users",JSON.stringify(users));

  alert("Registro exitoso ðŸ˜„");
  showLogin();
}

// login
function login(){
  let u = loginUser.value.trim();
  let p = loginPass.value.trim();

  if(!users[u]) return alert("Usuario no encontrado");
  if(users[u].password!==p) return alert("ContraseÃ±a incorrecta");

  session = u;
  localStorage.setItem("session",u);

  loadProfile();
}

// cargar perfil
function loadProfile(){
  if(!session) return showLogin();

  let user = users[session];
  welcome.innerText = "Bienvenido " + user.name;
  avatarBox.innerText = user.avatar;

  showProfile();
}

// cambiar nombre
function changeName(){
  let n = newName.value.trim();
  if(!n) return;

  users[session].name = n;
  localStorage.setItem("users",JSON.stringify(users));
  loadProfile();
}

// cambiar avatar
function changeAvatar(){
  let a = newAvatar.value.trim().toUpperCase();
  if(!a) return;

  users[session].avatar = a;
  localStorage.setItem("users",JSON.stringify(users));
  loadProfile();
}

// cerrar sesiÃ³n
function logout(){
  localStorage.removeItem("session");
  session = null;
  showLogin();
}

// si hay sesiÃ³n activa
if(session) loadProfile();
</script>

</body>
</html>
